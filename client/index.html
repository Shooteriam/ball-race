<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#6366f1">
    <meta name="description" content="–ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –≥–æ–Ω–∫–∞ —à–∞—Ä–∏–∫–æ–≤ –≤ Telegram">
    <title>Ball Race - Telegram Mini App</title>

    <!-- Modern Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css">

    <!-- Scripts -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
</head>

<body>
    <div class="container">
        <!-- Main Game Screen - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –µ–¥–∏–Ω—ã–π –¥–∏–∑–∞–π–Ω -->
        <div id="mainScreen" class="screen active">
            <!-- –¢–∞–π–º–µ—Ä –¥–æ —Å–ª–µ–¥—É—é—â–µ–π –∏–≥—Ä—ã -->
            <div class="card timer-card">
                <h3>‚è∞ –î–æ —Å–ª–µ–¥—É—é—â–µ–π –∏–≥—Ä—ã</h3>
                <div id="gameTimer" class="timer">00:00</div>
            </div>

            <!-- –ü–æ–∫—É–ø–∫–∞ —à–∞—Ä–∏–∫–æ–≤ -->
            <div class="card purchase-section">
                <div class="purchase-card">
                    <h3>üé± –ü–æ–∫—É–ø–∫–∞ —à–∞—Ä–∏–∫–æ–≤</h3>
                    <div class="ball-selector">
                        <label for="ballCount">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞—Ä–∏–∫–æ–≤:</label>
                        <div class="counter-container">
                            <div class="counter-controls">
                                <button class="counter-btn" id="decreaseBalls" data-change="-1">-1</button>
                                <button class="counter-btn" id="decrease10Balls" data-change="-10">-10</button>
                                <input type="number" id="ballCount" min="1" max="50" value="1">
                                <button class="counter-btn" id="increase10Balls" data-change="10">+10</button>
                                <button class="counter-btn" id="increaseBalls" data-change="1">+1</button>
                            </div>
                            <div class="quick-select">
                                <button class="quick-btn" data-value="1">1</button>
                                <button class="quick-btn" data-value="10">10</button>
                                <button class="quick-btn" data-value="25">25</button>
                                <button class="quick-btn" data-value="50">50</button>
                            </div>
                        </div>
                    </div>
                    <p class="cost">–°—Ç–æ–∏–º–æ—Å—Ç—å: <span id="totalCost">50</span> ‚≠ê</p>
                    <button id="buyBallsBtn" class="btn btn-primary">
                        ‚ú® –ö—É–ø–∏—Ç—å —à–∞—Ä–∏–∫–∏
                    </button>
                    <div class="user-balls-display">
                        <span>–í–∞—à–∏ —à–∞—Ä–∏–∫–∏: <strong id="playerBallCount">0</strong> üé±</span>
                    </div>
                </div>
            </div>

            <!-- –õ–æ–±–±–∏ –∏–≥—Ä–æ–∫–æ–≤ -->
            <div class="card lobby-section">
                <div class="lobby-card">
                    <h3>üèÅ –õ–æ–±–±–∏ –∏–≥—Ä–æ–∫–æ–≤ (<span id="playerCount">0</span>/20)</h3>
                    <div id="playerList" class="player-list">
                        <div class="empty-lobby">
                            <p>üë• –û–∂–∏–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤...</p>
                            <p>–ö—É–ø–∏—Ç–µ —à–∞—Ä–∏–∫–∏, —á—Ç–æ–±—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∏–≥—Ä–µ!</p>
                        </div>
                    </div>
                    <div class="lobby-actions">
                        <p>–£ –≤–∞—Å: <span id="playerBallCount">0</span> —à–∞—Ä–∏–∫–æ–≤ üé±</p>
                        <button id="startGameBtn" class="btn btn-success" disabled>
                            üöÄ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="gameScreen" class="screen">
            <div class="game-header">
                <div class="game-status">
                    <span id="gameStatus">–ò–≥—Ä–∞ –∏–¥–µ—Ç...</span>
                    <span id="gameTime">00:00</span>
                </div>
                <div class="player-stats">
                    <span id="totalBalls">–í—Å–µ–≥–æ —à–∞—Ä–∏–∫–æ–≤: 0</span>
                </div>
            </div>

            <div class="game-canvas-container">
                <canvas id="gameCanvas" width="800" height="1200"></canvas>
                <div class="camera-controls">
                    <button id="followBallBtn" class="btn btn-small">üìç –°–ª–µ–¥–∏—Ç—å –∑–∞ —à–∞—Ä–∞–º–∏</button>
                    <button id="topViewBtn" class="btn btn-small">üîù –í–∏–¥ —Å–≤–µ—Ä—Ö—É</button>
                    <button id="finishViewBtn" class="btn btn-small">üèÅ –ö —Ñ–∏–Ω–∏—à—É</button>
                </div>
            </div>

            <div class="game-controls">
                <button id="spectateBtn" class="btn secondary">–†–µ–∂–∏–º –Ω–∞–±–ª—é–¥–µ–Ω–∏—è</button>
                <button id="backToLobbyBtn" class="btn danger">–í –ª–æ–±–±–∏</button>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="screen">
            <div class="results-header">
                <h2>üèÜ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä—ã</h2>
            </div>

            <div class="results-content">
                <div id="winnerCard" class="winner-card">
                    <h3>ü•á –ü–æ–±–µ–¥–∏—Ç–µ–ª—å</h3>
                    <div id="winnerInfo"></div>
                </div>

                <div class="results-list">
                    <h3>üìä –í—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
                    <div id="resultsList"></div>
                </div>

                <div class="results-actions">
                    <button id="newGameBtn" class="btn btn-primary">
                        üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞
                    </button>
                    <button id="backToMainBtn" class="btn btn-secondary">
                        üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é
                    </button>
                </div>
            </div>
        </div>

        <!-- Notifications -->
        <div id="notifications" class="notifications"></div>

        <!-- Tab Navigation -->
        <div class="tab-navigation">
            <button class="tab-button active" data-tab="game">
                <span class="tab-icon">üéÆ</span>
                <span class="tab-text">–ò–≥—Ä–∞</span>
            </button>
            <button class="tab-button" data-tab="profile">
                <span class="tab-icon">üë§</span>
                <span class="tab-text">–ü—Ä–æ—Ñ–∏–ª—å</span>
            </button>
            <button class="tab-button" data-tab="leaderboard">
                <span class="tab-icon">üèÜ</span>
                <span class="tab-text">–†–µ–π—Ç–∏–Ω–≥</span>
            </button>
        </div>

        <!-- Profile Screen -->
        <div id="profileScreen" class="screen">
            <div class="card profile-card">
                <div class="profile-header">
                    <div class="profile-avatar">
                        <span id="profileAvatar">üë§</span>
                    </div>
                    <div class="profile-info">
                        <h2 id="profileName">–ò–≥—Ä–æ–∫</h2>
                        <p id="profileUsername">@username</p>
                    </div>
                </div>

                <div class="profile-stats">
                    <div class="stat-item">
                        <span class="stat-icon">üé±</span>
                        <span class="stat-label">–í—Å–µ–≥–æ —à–∞—Ä–∏–∫–æ–≤</span>
                        <span class="stat-value" id="totalBallsOwned">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üèÜ</span>
                        <span class="stat-label">–ò–≥—Ä –≤—ã–∏–≥—Ä–∞–Ω–æ</span>
                        <span class="stat-value" id="gamesWon">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üéÆ</span>
                        <span class="stat-label">–ò–≥—Ä —Å—ã–≥—Ä–∞–Ω–æ</span>
                        <span class="stat-value" id="gamesPlayed">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">‚≠ê</span>
                        <span class="stat-label">–†–µ–π—Ç–∏–Ω–≥</span>
                        <span class="stat-value" id="playerRating">1000</span>
                    </div>
                </div>

                <div class="profile-achievements">
                    <h3>üèÖ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
                    <div class="achievements-grid">
                        <div class="achievement-item locked">
                            <span class="achievement-icon">ü•á</span>
                            <span class="achievement-name">–ü–µ—Ä–≤–∞—è –ø–æ–±–µ–¥–∞</span>
                        </div>
                        <div class="achievement-item locked">
                            <span class="achievement-icon">üéØ</span>
                            <span class="achievement-name">–ú–µ—Ç–∫–∏–π —Å—Ç—Ä–µ–ª–æ–∫</span>
                        </div>
                        <div class="achievement-item locked">
                            <span class="achievement-icon">üí∞</span>
                            <span class="achievement-name">–ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä</span>
                        </div>
                        <div class="achievement-item locked">
                            <span class="achievement-icon">üî•</span>
                            <span class="achievement-name">–ù–∞ –≤–æ–ª–Ω–µ</span>
                        </div>
                    </div>
                </div>

                <div class="profile-settings">
                    <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                    <div class="setting-item">
                        <span class="setting-label">–ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã</span>
                        <label class="toggle">
                            <input type="checkbox" id="soundEffects" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <span class="setting-label">–í–∏–±—Ä–∞—Ü–∏—è</span>
                        <label class="toggle">
                            <input type="checkbox" id="vibration" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <span class="setting-label">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
                        <label class="toggle">
                            <input type="checkbox" id="notifications" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript files -->
    <script src="js/game.js"></script>
    <script src="js/app.js"></script>
</body>

</html>