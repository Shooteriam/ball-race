# Ball Race - Telegram Mini App

## Быстрый запуск

### 1. Установка зависимостей
```bash
cd server
npm install
```

### 2. Настройка переменных окружения
Отредактируйте файл `server/.env`:
- Замените `YOUR_BOT_TOKEN_HERE` на токен вашего Telegram бота
- Добавьте ваш Telegram ID в `ADMIN_IDS`

### 3. Настройка администраторов
Отредактируйте файл `admin-config.txt` и добавьте ваш Telegram ID

### 4. Запуск сервера
```bash
cd server
npm start
```

## Основные исправления

✅ **Исправлена интеграция с Telegram Stars**
- Добавлена валидация данных Telegram WebApp
- Улучшена обработка платежей
- Добавлена симуляция для режима разработки

✅ **Оптимизирована физика игры**
- Улучшена гравитация и движение шариков
- Исправлены коллизии с препятствиями
- Оптимизированы препятствия для лучшего геймплея

✅ **Адаптивный дизайн для мобильных устройств**
- Canvas автоматически адаптируется под размер экрана
- Улучшена отрисовка шариков и препятствий
- Добавлены мобильные оптимизации

✅ **Улучшен пользовательский интерфейс**
- Добавлены анимации и эффекты
- Улучшена обратная связь для пользователя
- Оптимизирован для Telegram Mini Apps

✅ **Стабильность сервера**
- Улучшена обработка ошибок
- Добавлена статистика игр
- Оптимизирован сетевой код

## Настройка Telegram бота

1. Создайте бота через @BotFather
2. Получите токен бота
3. Настройте Mini App командой `/setmenubutton`
4. Укажите URL вашего приложения

## Настройка игры

Измените параметры в файле `server/.env`:
- `GAME_INTERVAL` - интервал между играми (мс)
- `BALL_PRICE` - цена шарика в Telegram Stars
- `MAX_BALLS_PER_PLAYER` - максимум шариков на игрока
- `MAX_PLAYERS` - максимум игроков в лобби

## Деплой на Render

1. Загрузите код на GitHub
2. Подключите репозиторий к Render
3. Используйте настройки из `render.yaml`
4. Установите переменные окружения в панели Render

## Проблемы и их решения

**Проблема**: Шарики не двигаются плавно
**Решение**: Проверьте производительность устройства, снизьте количество шариков

**Проблема**: Платежи не работают
**Решение**: Убедитесь, что настроен правильный токен бота и Webhook

**Проблема**: Игра не адаптируется под экран
**Решение**: Очистите кеш браузера, проверьте мета-теги viewport

## Контакты

По вопросам разработки и настройки обращайтесь к разработчику.
